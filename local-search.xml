<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Grafanaæœªæˆæƒä»»æ„æ–‡ä»¶è¯»å–æ¼æ´æœ¬åœ°å¤ç°</title>
    <link href="/2022/01/10/Grafana%E6%9C%AA%E6%8E%88%E6%9D%83%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E6%BC%8F%E6%B4%9E%E6%9C%AC%E5%9C%B0%E5%A4%8D%E7%8E%B0/"/>
    <url>/2022/01/10/Grafana%E6%9C%AA%E6%8E%88%E6%9D%83%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E6%BC%8F%E6%B4%9E%E6%9C%AC%E5%9C%B0%E5%A4%8D%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>ğŸ‘‰å£°æ˜ï¼šæ–‡ç« æ‰€æä¾›çš„å†…å®¹å’Œå·¥å…·ä»…ä¾›äºä¸ªäººå­¦ä¹ å’Œç ”ç©¶ï¼Œä¸¥ç¦ä¼ æ’­è€…åˆ©ç”¨æœ¬æ–‡ç« çš„ç›¸å…³å†…å®¹è¿›è¡Œéæ³•æµ‹è¯•ã€‚ç”±äºä¼ æ’­ã€åˆ©ç”¨æ­¤æ–‡ç« æ‰€æä¾›çš„ä¿¡æ¯è€Œé€ æˆçš„ä»»ä½•ç›´æ¥æˆ–è€…é—´æ¥çš„åæœåŠæŸå¤±ï¼Œå‡ç”±ä½¿ç”¨è€…æœ¬äººè´Ÿè´£ï¼Œæœ¬å…¬ä¼—å·åŠæ–‡ç« ä½œè€…ä¸ä¸ºæ­¤æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚æœªç»ä½œè€…å…è®¸ï¼Œä»»ä½•äººä¸å¾—éšæ„ä¿®æ”¹æˆ–å¢å‡æ–‡ç« çš„å†…å®¹ã€‚</p></blockquote><h2 id="ä¸€ã€æ¼æ´æè¿°"><a href="#ä¸€ã€æ¼æ´æè¿°" class="headerlink" title="ä¸€ã€æ¼æ´æè¿°"></a>ä¸€ã€æ¼æ´æè¿°</h2><p>Grafanaæ˜¯ä¸€æ¬¾ç”¨Goè¯­è¨€å¼€å‘çš„å¼€æºæ•°æ®å¯è§†åŒ–å·¥å…·,å¯ä»¥åšæ•°æ®ç›‘æ§å’Œæ•°æ®ç»Ÿè®¡,å¹¶å¸¦æœ‰å‘Šè­¦åŠŸèƒ½ã€‚Grafanaä¸“æ³¨äºæ—¶é—´åºåˆ—å›¾è¡¨åˆ†æï¼Œæ”¯æŒå¤šç§æ•°æ®æºï¼Œå¦‚ Graphiteã€InfluxDBã€Elasticsearchã€Mysqlã€K8sã€Zabbix ç­‰ã€‚<br>2021å¹´12æœˆ3æ—¥ï¼ŒGrafanaLabså‘å¸ƒå®‰å…¨å…¬å‘Šï¼ŒGrafana ä¸­å­˜åœ¨ä¸€ä¸ªç›®å½•éå†0dayæ¼æ´ï¼ˆCVE-2021-43798ï¼‰ï¼Œå…è®¸è®¿é—®æœ¬åœ°æ–‡ä»¶ï¼Œå…¶CVSSè¯„åˆ†ä¸º7.5ã€‚</p><p>12æœˆ7æ—¥ï¼Œè¯¥æ¼æ´çš„æŠ€æœ¯ç»†èŠ‚å’ŒPoCå·²åœ¨äº’è”ç½‘ä¸Šå…¬å¼€ï¼ŒGrafanaLabs ä¹Ÿå·²å‘å¸ƒä¿®å¤ç¨‹åºã€‚è¯¥æ¼æ´çš„URLè·¯å¾„æ¶‰åŠå·²å®‰è£…æ’ä»¶çš„æ’ä»¶IDï¼Œç”±äºæ¯ä¸ªGrafanaå®ä¾‹éƒ½æœ‰é¢„è£…çš„æ’ä»¶ï¼Œå¦‚Prometheusæ’ä»¶æˆ–MySQLæ’ä»¶ï¼Œå› æ­¤æ¯ä¸ªå®ä¾‹éƒ½å®¹æ˜“å—åˆ°æ”»å‡»ã€‚</p><p>CVEç¼–å·ï¼šCVE-2021-43798</p><p>æ¼æ´ç­‰çº§ï¼šé«˜çº§</p><p>å½±å“èŒƒå›´ï¼š<br>Grafana 8.3.x &lt; 8.3.1<br>Grafana 8.2.x &lt; 8.2.7<br>Grafana 8.1.x &lt; 8.1.8<br>Grafana 8.0.x &lt; 8.0.7</p><p>å®‰å…¨ç‰ˆæœ¬ï¼š<br>Grafana 8.3.1<br>Grafana 8.2.7<br>Grafana 8.1.8<br>Grafana 8.0.7</p><h2 id="äºŒã€æœ¬åœ°å¤ç°"><a href="#äºŒã€æœ¬åœ°å¤ç°" class="headerlink" title="äºŒã€æœ¬åœ°å¤ç°"></a>äºŒã€æœ¬åœ°å¤ç°</h2><p>1.grafanaä¸‹è½½åœ°å€<br>ï»¿ï»¿ï»¿ï»¿ï»¿ï»¿<a href="https://grafana.com/grafana/download/8.3.0?platform=docker">https://grafana.com/grafana/download/8.3.0?platform=docker</a><br>2.æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½æ¼æ´ç‰ˆæœ¬çš„dockeré•œåƒå¹¶è¿è¡Œ</p><figure class="highlight stylus"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs stylus"><span class="hljs-selector-id">#docker</span> run -d --name=grafana -<span class="hljs-selector-tag">p</span> <span class="hljs-number">3000</span>:<span class="hljs-number">3000</span> grafana/grafana-enterprise:<span class="hljs-number">8.3</span>.<span class="hljs-number">0</span><br></code></pre></div></td></tr></table></figure><p><img src="/img/grafana1.png" alt="å›¾1"><br>3.å¯åŠ¨ç¯å¢ƒåï¼Œè®¿é—®<a href="http://192.168.0.175:3000/login">http://192.168.0.175:3000/login</a>ï»¿<br><img src="/img/grafana2.png" alt="å›¾2"><br>4.ç½‘ä¸Šå·²ç»æœ‰éå¸¸å¤šå…¬å¼€çš„pocï¼Œç›´æ¥åˆ©ç”¨ï¼Œè·å–/etc/passwdæ–‡ä»¶å†…å®¹<br><img src="/img/grafana3.png" alt="å›¾3"><br>5.å› ä¸ºæ¯ä¸ªGrafanaå®ä¾‹éƒ½æœ‰é¢„è£…çš„æ’ä»¶ï¼Œæ‰€ä»¥å…¶å®æ¼æ´URLéå¸¸å¤šï¼Œå¯ä»¥åŠ è½½Payloadé€šè¿‡BPçˆ†ç ´<br><img src="/img/grafana4.png" alt="å›¾4"><br>6.å®˜æ–¹å·²ç»å‘å¸ƒäº†æ–°ç‰ˆæœ¬ï¼Œ8.3.1ä¸å­˜åœ¨æ­¤æ¼æ´ï¼ŒåŒæ ·çš„æ–¹æ³•ä¸‹è½½8.3.1çš„ç¯å¢ƒæµ‹è¯•<br><img src="/img/grafana5.png" alt="å›¾5"><br>7.çˆ†ç ´URLå‡è¿”å›404ï¼Œæ¼æ´å·²ç»ä¿®å¤<br><img src="/img/grafana6.png" alt="å›¾6"><br>8.å†™äº†ä¸€ä¸ªæ¼æ´æ‰¹é‡æ¢æµ‹çš„shellè„šæœ¬ï¼Œå»ºè®®å—å½±å“ä¼ä¸šè‡ªæŸ¥ï¼Œæ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š<br><img src="/img/grafana7.png" alt="å›¾7"><br>9.è„šæœ¬æ”¾åœ¨githubä¸Šäº†ï¼Œæœ‰éœ€è¦çš„å¯è‡ªè¡Œä¸‹è½½ï¼Œä¸‹è½½åœ°å€<br><a href="https://github.com/tianhai66/Shell_POC/">https://github.com/tianhai66/Shell_POC/</a>ï»¿</p><h2 id="ä¸‰ã€ä¿®å¤æ–¹æ³•"><a href="#ä¸‰ã€ä¿®å¤æ–¹æ³•" class="headerlink" title="ä¸‰ã€ä¿®å¤æ–¹æ³•"></a>ä¸‰ã€ä¿®å¤æ–¹æ³•</h2><p>1.å®˜æ–¹å·²ç»å‘å¸ƒäº†æ–°ç‰ˆæœ¬ï¼Œå»ºè®®å—å½±å“çš„ç”¨æˆ·å°½å¿«å‡çº§è‡³å®‰å…¨ç‰ˆæœ¬ï¼Œä¸‹è½½é“¾æ¥</p><figure class="highlight apache"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">https</span>://grafana.com/blog/<span class="hljs-number">2021</span>/<span class="hljs-number">12</span>/<span class="hljs-number">07</span>/grafana-<span class="hljs-number">8</span>.<span class="hljs-number">3</span>.<span class="hljs-number">1</span>-<span class="hljs-number">8</span>.<span class="hljs-number">2</span>.<span class="hljs-number">7</span>-<span class="hljs-number">8</span>.<span class="hljs-number">1</span>.<span class="hljs-number">8</span>-and-<span class="hljs-number">8</span>.<span class="hljs-number">0</span>.<span class="hljs-number">7</span>-released-with-high-severity-security-fix/<br></code></pre></div></td></tr></table></figure><p>2.å¦‚æ— æ³•å‡çº§ï¼Œå¯è®¾ç½®Grafanaåªå¯¹å¯ä¿¡åœ°å€å¼€æ”¾<br>3.ä½¿ç”¨WAFç­‰å®‰å…¨é˜²æŠ¤äº§å“ï¼Œè¿‡æ»¤æ”»å‡»å‚æ•°</p><figure class="highlight awk"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs awk">â™¾ï¸<br>å‚è€ƒé“¾æ¥<br>https:<span class="hljs-regexp">//m</span>p.weixin.qq.com<span class="hljs-regexp">/s/</span>dqJ3F_fStlj78S0qhQ3Ggwï»¿<br>https:<span class="hljs-regexp">//m</span>p.weixin.qq.com<span class="hljs-regexp">/s/</span>Haf3eN2zW1Io3iEER7TwsQ<br></code></pre></div></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ç½‘ç»œå®‰å…¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ¼æ´å¤ç°</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DVWAå–æ¶ˆç™»å½•åŠä¿®æ”¹é»˜è®¤çº§åˆ«</title>
    <link href="/2022/01/09/DVWA%E5%8F%96%E6%B6%88%E7%99%BB%E5%BD%95%E5%8F%8A%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E7%BA%A7%E5%88%AB/"/>
    <url>/2022/01/09/DVWA%E5%8F%96%E6%B6%88%E7%99%BB%E5%BD%95%E5%8F%8A%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E7%BA%A7%E5%88%AB/</url>
    
    <content type="html"><![CDATA[<h1 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h1><p>DVWAï¼ˆDamn Vulnerable Web Applicationï¼‰æ˜¯ä¸€ä¸ªç”¨æ¥è¿›è¡Œå®‰å…¨è„†å¼±æ€§é‰´å®šçš„PHP/MySQL Webåº”ç”¨ã€‚æ—¨åœ¨ä¸ºå®‰å…¨ä¸“ä¸šäººå‘˜æµ‹è¯•è‡ªå·±çš„ä¸“ä¸šæŠ€èƒ½å’Œå·¥å…·æä¾›åˆæ³•çš„ç¯å¢ƒï¼Œå¸®åŠ©webå¼€å‘è€…æ›´å¥½çš„ç†è§£webåº”ç”¨å®‰å…¨é˜²èŒƒçš„è¿‡ç¨‹ã€‚<br>ç”±äºDVWAé»˜è®¤æ˜¯éœ€è¦ç™»å½•çš„ï¼Œåœ¨æŸäº›æµ‹è¯•æ—¶éœ€è¦å–æ¶ˆç™»å½•ï¼Œå¹¶ä¿®æ”¹é»˜è®¤çš„DVWAå®‰å…¨çº§åˆ«ã€‚</p><h1 id="äºŒã€æ“ä½œæ­¥éª¤"><a href="#äºŒã€æ“ä½œæ­¥éª¤" class="headerlink" title="äºŒã€æ“ä½œæ­¥éª¤"></a>äºŒã€æ“ä½œæ­¥éª¤</h1><h3 id="1ã€å–æ¶ˆDVWAç™»å½•"><a href="#1ã€å–æ¶ˆDVWAç™»å½•" class="headerlink" title="1ã€å–æ¶ˆDVWAç™»å½•"></a>1ã€å–æ¶ˆDVWAç™»å½•</h3><ol><li>æ›´æ”¹æ–‡ä»¶ï¼š\dvwa\includes\dvwaPage.inc.phpï¼Œä¿®æ”¹å…¶ä¸­çš„:Â dvwaIsLoggedIn å‡½æ•°<br>åŸå§‹å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š</li></ol><figure class="highlight php"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dvwaIsLoggedIn</span>(<span class="hljs-params"></span>) </span>&#123;<br>   <span class="hljs-variable">$dvwaSession</span> =&amp; dvwaSessionGrab();<br>   <span class="hljs-keyword">return</span> <span class="hljs-keyword">isset</span>( <span class="hljs-variable">$dvwaSession</span>[ <span class="hljs-string">&#x27;username&#x27;</span> ] );<br>  &#125;<br></code></pre></div></td></tr></table></figure><p>ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight php"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dvwaIsLoggedIn</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-variable">$dvwaSession</span> =&amp; dvwaSessionGrab();<br>    <span class="hljs-variable">$dvwaSession</span>[ <span class="hljs-string">&#x27;username&#x27;</span> ]=<span class="hljs-string">&#x27;admin&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">isset</span>( <span class="hljs-variable">$dvwaSession</span>[ <span class="hljs-string">&#x27;username&#x27;</span> ] );<br>&#125;<br></code></pre></div></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹åé‡å¯ApacheæœåŠ¡</li></ol><h3 id="2-ä¿®æ”¹é»˜è®¤çº§åˆ«ä¸ºlow"><a href="#2-ä¿®æ”¹é»˜è®¤çº§åˆ«ä¸ºlow" class="headerlink" title="2. ä¿®æ”¹é»˜è®¤çº§åˆ«ä¸ºlow"></a>2. ä¿®æ”¹é»˜è®¤çº§åˆ«ä¸ºlow</h3><ol><li>ç¼–è¾‘dvwa\config\config.inc.php </li></ol><figure class="highlight autoit"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs autoit">å°†$_DVWA[ <span class="hljs-string">&#x27;default_security_level&#x27;</span> ] = <span class="hljs-string">&#x27;impossible&#x27;</span>ä¸­çš„impossibleæ”¹ä¸ºlow<br></code></pre></div></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹åé‡å¯ApacheæœåŠ¡</li></ol>]]></content>
    
    
    <categories>
      
      <category>ç½‘ç»œå®‰å…¨</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DVWA</tag>
      
      <tag>é¶æœº</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2022/01/09/hello-world/"/>
    <url>/2022/01/09/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></div></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo server<br></code></pre></div></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo generate<br></code></pre></div></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></div></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
